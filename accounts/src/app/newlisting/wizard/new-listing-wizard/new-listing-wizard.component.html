<div class="form-wrapper">
  <div class="form-header">
    <h1>Add new Account</h1>
    <div class="step-counter">Step {{ step }} of {{ maxStep }}</div>
    <button class="x" (click)="cancel.emit()" aria-label="Close">âœ•</button>
  </div>

  <div class="form-box">
    <div [ngSwitch]="step">
      <!-- Step 1: Select Game -->
      <app-nl-step1-select-game
        *ngSwitchCase="1"
        [games]="games"
        [selected]="data.game"
        (select)="onGamePicked($event)"
        (validChange)="setValid($event)">
      </app-nl-step1-select-game>

      <!-- Step 2: Basics -->
      <app-nl-step2-basics
        *ngSwitchCase="2"
        [games]="games"
        [selectedGame]="data.game || ''"
        [currency]="data.currency"
        [price]="data.price ?? null"
        [title]="data.title"
        [slug]="data.slug"
        (change)="onBasicsChange($event)"
        (validChange)="setValid($event)">
      </app-nl-step2-basics>


      <app-nl-step4-details-type
        *ngSwitchCase="3"
        [typeValue]="data.type || ''"
        [details]="data.details || {}"
        (change)="onDetailsChange($event)"
        (validChange)="setValid($event)">
      </app-nl-step4-details-type>

      <app-nl-step5-delivery-promo
        *ngSwitchCase="4"
        [delivery]="data.deliveryInstructions || ''"
        [plan]="data.promotionPlan"
        (change)="onDeliveryChange($event)"
        (validChange)="setValid($event)">
      </app-nl-step5-delivery-promo>
    </div>
  </div>

  <app-wizard-nav
    [step]="step"
    [maxStep]="maxStep"
    [isNextEnabled]="currentStepValid"
    (next)="next()"
    (prev)="prev()">
  </app-wizard-nav>
</div>
